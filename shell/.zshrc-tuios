# =============================================================================
# TUIOS-Specific Zsh Configuration
# =============================================================================
# Minimal, fast config for TUIOS terminal multiplexer
# Loaded when $TUIOS_WINDOW_ID is set

# Disable bracketed paste mode immediately (TUIOS VT doesn't handle it properly)
# See ~/dotfiles/libraries/tuios/TODO.md for details
unset zle_bracketed_paste

# =============================================================================
# Load Core Modules
# =============================================================================

# Essential configuration
source ~/.zshrc.d/core.zsh       # History, keybindings, wordchars
source ~/.zshrc.d/path.zsh       # PATH additions
source ~/.zshrc.d/env.zsh        # Environment variables
source ~/.zshrc.d/aliases.zsh    # Command aliases
source ~/.zshrc.d/functions.zsh  # Custom functions

# Completions (fast, no dynamic loading)
fpath=($HOME/.docker/completions $fpath)
autoload -Uz compinit
compinit

# Essential integrations only
if command -v zoxide &> /dev/null; then
  eval "$(zoxide init zsh)"
fi

if command -v pyenv &> /dev/null; then
  eval "$(pyenv init -)"
fi

# =============================================================================
# Simple Prompt
# =============================================================================
# Clean, minimal prompt without Powerlevel10k overhead

# Git status function for prompt
git_prompt_info() {
  local branch
  branch=$(git rev-parse --abbrev-ref HEAD 2>/dev/null)
  if [[ -n "$branch" ]]; then
    local status
    if [[ -n $(git status --porcelain 2>/dev/null) ]]; then
      status="*"
    fi
    echo " %F{242}${branch}${status}%f"
  fi
}

# Set prompt
setopt PROMPT_SUBST
PROMPT='%F{cyan}%~%f$(git_prompt_info) %F{green}‚ùØ%f '
